<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Live</title>
  </head>
  <body>
    <h1>live</h1>

    <script src="reconnecting-ws.js"></script>
    <script src="store.js"></script>

    <script src="d3.min.js"></script>
    <script type="text/javascript">
      var ul = d3.select('body').append('ul')

      store.listen( () => {
        var li = ul.selectAll('li').data(
          Object.keys(store.data)
        )

        li.enter()
          .append('li')

        li.exit()
          .remove()

        li
          .text(d => d + " -> " +JSON.stringify(store.data[d][0].data.status))

      })

    </script>
  </body>
</html>
